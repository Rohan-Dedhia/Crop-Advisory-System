<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Crop Advisory System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            flex-direction: column;
        }

        .container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 550px;
            text-align: center;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        select, input, button {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 6px;
            border: 1px solid #ddd;
            font-size: 16px;
            box-sizing: border-box;
        }

        button {
            background: #27ae60;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        button:hover {
            background: #219653;
        }

        .recommendations {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            text-align: left;
        }

        .recommendations h3 {
            color: #27ae60;
            margin-bottom: 15px;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        ul li {
            background: #ffffff;
            padding: 15px;
            margin: 8px 0;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1.6;
        }

        .soil-type-info, .ph-info {
            margin-top: 5px;
            font-size: 14px;
            color: #666;
        }

        .error {
            color: #c0392b;
            background: #fce4e4;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="title">Smart Crop Advisory System</h1>

        <label for="language">üåç Select Language:</label>
        <select id="language" onchange="translatePage()">
            <option value="en">English</option>
            <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
        </select>

        <form id="recommendForm">
            <label id="labelSoilType">Soil Type:</label>
            <select id="soilType" required>
                <option value="" disabled selected>Select a soil type</option>
                <option value="0">General Soil</option>
                <option value="1">Sandy Soil</option>
                <option value="2">Clay Soil</option>
                <option value="3">Silty Soil</option>
                <option value="4">Loamy Soil</option>
                <option value="5">Peaty Soil</option>
                <option value="6">Saline Soil</option>
            </select>
            <div class="soil-type-info" id="soilTypeInfo"></div>

            <label id="labelWaterAvailable">Water Availability (mm):</label>
            <input type="number" id="waterAvailable" min="0" placeholder="Enter water availability" required>

            <label id="labelSoilPh">Soil pH:</label>
            <input type="number" step="0.1" id="soilPh" min="0" max="14" placeholder="Enter soil pH level" required>
            <div class="ph-info" id="phLevelInfo"></div>

            <button type="submit" id="submitBtn">Get Recommendations</button>
        </form>

        <div id="recommendations" class="recommendations"></div>
    </div>

    <script>
        const soilTypeDescriptions = {
            0: "General Soil: Suitable for a variety of crops.",
            1: "Sandy Soil: Good drainage, suitable for drought-resistant crops.",
            2: "Clay Soil: Retains moisture, suitable for moisture-loving crops.",
            3: "Silty Soil: Fertile and good for a variety of crops.",
            4: "Loamy Soil: Ideal for most crops, well-balanced.",
            5: "Peaty Soil: Moisture-rich, suitable for specific crops.",
            6: "Saline Soil: Suitable for salt-tolerant crops."
        };

        const phLevelInfo = {
            en: "pH levels between 6.0 and 7.0 are ideal for most crops.",
            hi: "6.0 ‡§∏‡•á 7.0 ‡§ï‡•á ‡§¨‡•Ä‡§ö pH ‡§∏‡•ç‡§§‡§∞ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§π‡•à‡§Ç‡•§",
            bn: "6.0 ‡¶•‡ßá‡¶ï‡ßá 7.0 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá pH ‡¶∏‡ßç‡¶§‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø‡¶∞‡¶≠‡¶æ‡¶ó ‡¶´‡¶∏‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂‡•§",
            te: "6.0 ‡∞®‡±Å‡∞Ç‡∞°‡∞ø 7.0 ‡∞Æ‡∞ß‡±ç‡∞Ø pH ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø ‡∞ö‡∞æ‡∞≤‡∞æ ‡∞™‡∞Ç‡∞ü‡∞≤‡∞ï‡±Å ‡∞Ö‡∞®‡±Å‡∞ï‡±Ç‡∞≤‡∞Ç.",
            mr: "6.0 ‡§§‡•á 7.0 ‡§¶‡§∞‡§Æ‡•ç‡§Ø‡§æ‡§® pH ‡§∏‡•ç‡§§‡§∞ ‡§¨‡§π‡•Å‡§§‡•á‡§ï ‡§™‡§ø‡§ï‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§Ü‡§π‡•á."
        };

        const soilTypeTranslations = {
            en: ["General Soil", "Sandy Soil", "Clay Soil", "Silty Soil", "Loamy Soil", "Peaty Soil", "Saline Soil"],
            hi: ["‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä", "‡§∞‡•á‡§§‡•Ä‡§≤‡•Ä ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä", "‡§ö‡§ø‡§ï‡§®‡•Ä ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä", "‡§ó‡§æ‡§¶ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä", "‡§¶‡•ã‡§Æ‡§ü ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä", "‡§™‡•Ä‡§ü ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä", "‡§®‡§Æ‡§ï‡•Ä‡§® ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä"],
            bn: ["‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶Æ‡¶æ‡¶ü‡¶ø", "‡¶¨‡¶æ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶Æ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶ü‡¶ø", "‡¶ï‡¶æ‡¶¶‡¶æ‡¶Æ‡¶æ‡¶ü‡¶ø", "‡¶™‡¶≤‡¶ø‡¶Æ‡¶æ‡¶ü‡¶ø", "‡¶¶‡ßã‡¶Ü‡¶Å‡¶∂ ‡¶Æ‡¶æ‡¶ü‡¶ø", "‡¶™‡¶ø‡¶ü ‡¶Æ‡¶æ‡¶ü‡¶ø", "‡¶≤‡¶¨‡¶£‡¶æ‡¶ï‡ßç‡¶§ ‡¶Æ‡¶æ‡¶ü‡¶ø"],
            te: ["‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø", "‡∞á‡∞∏‡±Å‡∞ï ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø", "‡∞¨‡∞Ç‡∞ï‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø", "‡∞™‡∞Ç‡∞ï‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø", "‡∞≤‡±ã‡∞Æ‡±Ä ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø", "‡∞™‡±Ä‡∞ü‡±ç ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø", "‡∞â‡∞™‡±ç‡∞™‡±Å ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø"],
            mr: ["‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§æ‡§§‡•Ä", "‡§µ‡§æ‡§≥‡•Ç‡§ö‡•Ä ‡§Æ‡§æ‡§§‡•Ä", "‡§ö‡§ø‡§ï‡§£‡§Æ‡§æ‡§§‡•Ä", "‡§ó‡§æ‡§≥‡§æ‡§ö‡•Ä ‡§Æ‡§æ‡§§‡•Ä", "‡§¶‡•ã‡§Æ‡§ü ‡§Æ‡§æ‡§§‡•Ä", "‡§™‡•Ä‡§ü ‡§Æ‡§æ‡§§‡•Ä", "‡§ñ‡§æ‡§∞‡§ü ‡§Æ‡§æ‡§§‡•Ä"]
        };

        const translations = {
            en: { title: "Smart Crop Advisory System", labelSoilType: "Soil Type:", soilTypePlaceholder: "Select a soil type", labelWaterAvailable: "Water Availability (mm):", waterAvailablePlaceholder: "Enter water availability", labelSoilPh: "Soil pH:", soilPhPlaceholder: "Enter soil pH level", submitBtn: "Get Recommendations" },
            hi: { title: "‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä", labelSoilType: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞:", soilTypePlaceholder: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç", labelWaterAvailable: "‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§§‡§æ (‡§Æ‡§ø‡§Æ‡•Ä):", waterAvailablePlaceholder: "‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§§‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç", labelSoilPh: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ pH:", soilPhPlaceholder: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ pH ‡§∏‡•ç‡§§‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç", submitBtn: "‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç" },
            bn: { title: "‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶´‡¶∏‡¶≤ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ", labelSoilType: "‡¶Æ‡¶æ‡¶ü‡¶ø‡¶∞ ‡¶ß‡¶∞‡¶®:", soilTypePlaceholder: "‡¶Æ‡¶æ‡¶ü‡¶ø‡¶∞ ‡¶ß‡¶∞‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®", labelWaterAvailable: "‡¶ú‡¶≤‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø‡¶§‡¶æ (‡¶Æ‡¶ø‡¶Æ‡¶ø):", waterAvailablePlaceholder: "‡¶ú‡¶≤‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®", labelSoilPh: "‡¶Æ‡¶æ‡¶ü‡¶ø‡¶∞ pH:", soilPhPlaceholder: "‡¶Æ‡¶æ‡¶ü‡¶ø‡¶∞ pH ‡¶∏‡ßç‡¶§‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®", submitBtn: "‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶™‡¶æ‡¶®" },
            te: { title: "‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞™‡∞Ç‡∞ü ‡∞∏‡∞≤‡∞π‡∞æ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡±ç‡∞•", labelSoilType: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞∞‡∞ï‡∞Ç:", soilTypePlaceholder: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞∞‡∞ï‡∞Ç ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø", labelWaterAvailable: "‡∞®‡±Ä‡∞ü‡∞ø ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å (‡∞Æ‡∞ø.‡∞Æ‡±Ä):", waterAvailablePlaceholder: "‡∞®‡±Ä‡∞ü‡∞ø ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", labelSoilPh: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø pH:", soilPhPlaceholder: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø pH ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", submitBtn: "‡∞∏‡∞ø‡∞´‡∞æ‡∞∞‡±ç‡∞∏‡±Å‡∞≤‡±Å ‡∞™‡±ä‡∞Ç‡∞¶‡∞Ç‡∞°‡∞ø" },
            mr: { title: "‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§™‡•Ä‡§ï ‡§∏‡§≤‡•ç‡§≤‡§æ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä", labelSoilType: "‡§Æ‡§æ‡§§‡•Ä‡§ö‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞:", soilTypePlaceholder: "‡§Æ‡§æ‡§§‡•Ä‡§ö‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ", labelWaterAvailable: "‡§™‡§æ‡§£‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§§‡§æ (‡§Æ‡§ø‡§Æ‡•Ä):", waterAvailablePlaceholder: "‡§™‡§æ‡§£‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§§‡§æ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ", labelSoilPh: "‡§Æ‡§æ‡§§‡•Ä‡§ö‡§æ pH:", soilPhPlaceholder: "‡§Æ‡§æ‡§§‡•Ä‡§ö‡§æ pH ‡§∏‡•ç‡§§‡§∞ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ", submitBtn: "‡§∂‡§ø‡§´‡§æ‡§∞‡§∏‡•Ä ‡§Æ‡§ø‡§≥‡§µ‡§æ" }
        };

        document.getElementById("soilType").addEventListener("change", function() {
            const soilType = this.value;
            document.getElementById("soilTypeInfo").innerText = soilTypeDescriptions[soilType] || "";
        });

        document.getElementById("soilPh").addEventListener("focus", function() {
            const selectedLang = document.getElementById("language").value;
            document.getElementById("phLevelInfo").innerText = phLevelInfo[selectedLang];
        });

        document.getElementById("recommendForm").addEventListener("submit", async function(event) {
            event.preventDefault();

            const soilType = parseInt(document.getElementById("soilType").value);
            const waterAvailable = parseInt(document.getElementById("waterAvailable").value);
            const soilPh = parseFloat(document.getElementById("soilPh").value);

            if (isNaN(soilType) || waterAvailable < 0 || soilPh < 0 || soilPh > 14) {
                document.getElementById("recommendations").innerHTML = `<h3 class="error">Please enter valid values: Select a soil type, Water (‚â•0), pH (0-14).</h3>`;
                document.getElementById("recommendations").style.display = "block";
                return;
            }

            const requestData = { soil_type: soilType, water_available: waterAvailable, soil_ph: soilPh };

            try {
                const response = await fetch('http://127.0.0.1:5000/recommend_crop', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestData)
                });

                const result = await response.json();
                const resultDiv = document.getElementById("recommendations");
                resultDiv.style.display = "block";

                if (response.ok) {
                    if (result.recommended_crops && result.recommended_crops.length > 0) {
                        const uniqueCrops = new Map();
                        result.recommended_crops.forEach(crop => {
                            if (!uniqueCrops.has(crop.Crop)) {
                                uniqueCrops.set(crop.Crop, {
                                    fertilizer: crop.Recommended_Fertilizer,
                                    water: crop.Water_Requirement_mm,
                                    yield: crop.Yield_per_Acre_Qtl,
                                    harvest: crop.Best_Harvest_Time
                                });
                            }
                        });

                        resultDiv.innerHTML = `
                            <h3>üå± Recommended Crops:</h3>
                            <ul>${Array.from(uniqueCrops).map(([cropName, details]) => `
                                <li>
                                    <strong>${cropName}</strong><br>
                                    Fertilizer: ${details.fertilizer}<br>
                                    Water Needed: ${details.water} mm<br>
                                    Expected Yield: ${details.yield} Quintal/Acre<br>
                                    Best Harvest: Month ${details.harvest}
                                </li>
                            `).join('')}</ul>`;
                    } else {
                        resultDiv.innerHTML = `<h3>üå± ${result.message || 'No suitable crops found.'}</h3>`;
                    }
                } else {
                    resultDiv.innerHTML = `<h3 class="error">üå± Error: ${result.error || 'Something went wrong.'}</h3>`;
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById("recommendations").innerHTML = `<h3 class="error">üå± An error occurred. Please try again.</h3>`;
                document.getElementById("recommendations").style.display = "block";
            }
        });

        function translatePage() {
            const selectedLang = document.getElementById("language").value;
            const t = translations[selectedLang];
            const soilTypes = soilTypeTranslations[selectedLang];

            document.getElementById("title").innerText = t.title;
            document.getElementById("labelSoilType").innerText = t.labelSoilType;
            document.getElementById("labelWaterAvailable").innerText = t.labelWaterAvailable;
            document.getElementById("waterAvailable").placeholder = t.waterAvailablePlaceholder;
            document.getElementById("labelSoilPh").innerText = t.labelSoilPh;
            document.getElementById("soilPh").placeholder = t.soilPhPlaceholder;
            document.getElementById("submitBtn").innerText = t.submitBtn;
            document.getElementById("phLevelInfo").innerText = phLevelInfo[selectedLang];

            // Update soil type dropdown options
            const soilTypeSelect = document.getElementById("soilType");
            const selectedValue = soilTypeSelect.value;
            soilTypeSelect.innerHTML = `<option value="" disabled ${!selectedValue ? 'selected' : ''}>${t.soilTypePlaceholder}</option>`;
            for (let i = 0; i < soilTypes.length; i++) {
                soilTypeSelect.innerHTML += `<option value="${i}" ${i == selectedValue ? 'selected' : ''}>${soilTypes[i]}</option>`;
            }
            document.getElementById("soilTypeInfo").innerText = soilTypeDescriptions[selectedValue] || "";
        }

        // Initial translation
        translatePage();
    </script>
</body>
</html>